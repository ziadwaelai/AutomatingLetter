2025-08-06 17:00:38,468 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:00:38,470 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:00:38,473 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:14:29,479 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:14:29,490 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:14:30,675 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 17:14:30,675 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 17:14:30,902 - werkzeug - INFO -  * Restarting with stat
2025-08-06 17:14:34,352 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:14:34,352 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:14:34,372 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:14:34,380 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 17:16:46,501 - __main__ - INFO - GET http://localhost:5000/ - 127.0.0.1
2025-08-06 17:16:46,501 - __main__ - INFO - Response: 200 - root
2025-08-06 17:16:46,503 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:16:46] "GET / HTTP/1.1" 200 -
2025-08-06 17:16:55,293 - __main__ - INFO - GET http://localhost:5000/api/docs - 127.0.0.1
2025-08-06 17:16:55,293 - __main__ - INFO - Response: 404 - None
2025-08-06 17:16:55,294 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:16:55] "[33mGET /api/docs HTTP/1.1[0m" 404 -
2025-08-06 17:25:23,350 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:25:23,350 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 17:25:24,246 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 17:25:24,248 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:25:24,248 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:25:24,253 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:25:24,257 - __main__ - INFO - Response: 503 - health_check
2025-08-06 17:25:24,258 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:25:24] "[35m[1mGET /health HTTP/1.1[0m" 503 -
2025-08-06 17:25:47,687 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:25:47,687 - __main__ - INFO - Response: 503 - health_check
2025-08-06 17:25:47,689 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:25:47] "[35m[1mGET /health HTTP/1.1[0m" 503 -
2025-08-06 17:25:50,039 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:25:50,040 - __main__ - INFO - Response: 503 - health_check
2025-08-06 17:25:50,040 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:25:50] "[35m[1mGET /health HTTP/1.1[0m" 503 -
2025-08-06 17:26:52,965 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:26:52,965 - __main__ - INFO - Response: 405 - None
2025-08-06 17:26:52,966 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:26:52] "[31m[1mGET /api/v1/letter/generate HTTP/1.1[0m" 405 -
2025-08-06 17:27:08,352 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:27:11,452 - src.utils.helpers - INFO - get_data_by_key executed in 3.092s
2025-08-06 17:27:11,480 - src.utils.helpers - INFO - get_data_by_key executed in 3.120s
2025-08-06 17:27:11,660 - src.utils.helpers - INFO - get_data_by_key executed in 3.300s
2025-08-06 17:27:11,942 - src.utils.helpers - INFO - get_data_by_key executed in 3.582s
2025-08-06 17:27:11,942 - src.utils.helpers - INFO - get_letter_config_by_category executed in 3.584s
2025-08-06 17:27:11,942 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-18722
2025-08-06 17:27:19,173 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 17:27:19,214 - src.services.letter_generator - ERROR - Letter generation failed for ID LET-20250806-18722: Invalid response type: <class 'dict'>
2025-08-06 17:27:19,214 - src.utils.exceptions - ERROR - Operation failed: letter_generation
2025-08-06 17:27:19,216 - src.utils.helpers - ERROR - generate_letter failed after 7.274s: Failed to generate letter: Invalid response type: <class 'dict'>
2025-08-06 17:27:19,216 - src.api.letter_routes - ERROR - Letter generation failed: AI service error: Failed to generate letter: Invalid response type: <class 'dict'>
2025-08-06 17:27:19,216 - src.utils.helpers - INFO - generate_letter executed in 10.864s
2025-08-06 17:27:19,216 - __main__ - INFO - Response: 500 - letter.generate_letter
2025-08-06 17:27:19,216 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:27:19] "[35m[1mPOST /api/v1/letter/generate HTTP/1.1[0m" 500 -
2025-08-06 17:30:24,261 - src.services.chat_service - INFO - Cleaned up 0 expired sessions
2025-08-06 17:30:47,693 - __main__ - INFO - GET http://localhost:5000/ - 127.0.0.1
2025-08-06 17:30:47,694 - __main__ - INFO - Response: 200 - root
2025-08-06 17:30:47,695 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:30:47] "GET / HTTP/1.1" 200 -
2025-08-06 17:30:56,179 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:30:56,179 - __main__ - INFO - Response: 503 - health_check
2025-08-06 17:30:56,180 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:30:56] "[35m[1mGET /health HTTP/1.1[0m" 503 -
2025-08-06 17:32:21,884 - werkzeug - INFO -  * Detected change in 'd:\\shobbak\\AutomatingLetter\\src\\services\\google_services.py', reloading
2025-08-06 17:32:22,282 - werkzeug - INFO -  * Restarting with stat
2025-08-06 17:32:26,247 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:32:26,248 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:32:26,272 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:32:26,287 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 17:32:33,586 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:32:33,587 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 17:32:34,034 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 17:32:34,034 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:32:34,034 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:32:34,034 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:32:34,044 - __main__ - INFO - Response: 200 - health_check
2025-08-06 17:32:34,045 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:32:34] "GET /health HTTP/1.1" 200 -
2025-08-06 17:32:43,083 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:32:43,083 - __main__ - INFO - Response: 200 - health_check
2025-08-06 17:32:43,083 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:32:43] "GET /health HTTP/1.1" 200 -
2025-08-06 17:33:09,522 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:33:11,861 - src.utils.helpers - INFO - get_data_by_key executed in 2.283s
2025-08-06 17:33:11,865 - src.utils.helpers - INFO - get_data_by_key executed in 2.270s
2025-08-06 17:33:12,258 - src.utils.helpers - INFO - get_data_by_key executed in 2.695s
2025-08-06 17:33:12,287 - src.utils.helpers - INFO - get_data_by_key executed in 2.753s
2025-08-06 17:33:12,288 - src.utils.helpers - INFO - get_letter_config_by_category executed in 2.754s
2025-08-06 17:33:12,288 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-14356
2025-08-06 17:33:17,809 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 17:33:17,820 - src.services.letter_generator - ERROR - Letter generation failed for ID LET-20250806-14356: Invalid response type: <class 'dict'>
2025-08-06 17:33:17,820 - src.utils.exceptions - ERROR - Operation failed: letter_generation
2025-08-06 17:33:17,820 - src.utils.helpers - ERROR - generate_letter failed after 5.533s: Failed to generate letter: Invalid response type: <class 'dict'>
2025-08-06 17:33:17,821 - src.api.letter_routes - ERROR - Letter generation failed: AI service error: Failed to generate letter: Invalid response type: <class 'dict'>
2025-08-06 17:33:17,821 - src.utils.helpers - INFO - generate_letter executed in 8.298s
2025-08-06 17:33:17,821 - __main__ - INFO - Response: 500 - letter.generate_letter
2025-08-06 17:33:17,822 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:33:17] "[35m[1mPOST /api/v1/letter/generate HTTP/1.1[0m" 500 -
2025-08-06 17:33:28,413 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/categories - 127.0.0.1
2025-08-06 17:33:28,414 - __main__ - INFO - Response: 200 - letter.get_letter_categories
2025-08-06 17:33:28,414 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:33:28] "GET /api/v1/letter/categories HTTP/1.1" 200 -
2025-08-06 17:33:40,835 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/categories - 127.0.0.1
2025-08-06 17:33:40,837 - __main__ - INFO - Response: 200 - letter.get_letter_categories
2025-08-06 17:33:40,838 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:33:40] "GET /api/v1/letter/categories HTTP/1.1" 200 -
2025-08-06 17:33:54,240 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:33:54,240 - src.services.chat_service - INFO - Created chat session: 93d1945b-8d76-4679-9934-97a139f11d49
2025-08-06 17:33:54,240 - src.api.chat_routes - INFO - Created chat session: 93d1945b-8d76-4679-9934-97a139f11d49
2025-08-06 17:33:54,240 - src.utils.helpers - INFO - create_chat_session executed in 0.000s
2025-08-06 17:33:54,240 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 17:33:54,240 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:33:54] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 17:34:07,374 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/health - 127.0.0.1
2025-08-06 17:34:07,375 - __main__ - INFO - Response: 200 - letter.health_check
2025-08-06 17:34:07,375 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:34:07] "GET /api/v1/letter/health HTTP/1.1" 200 -
2025-08-06 17:34:13,689 - __main__ - INFO - GET http://localhost:5000/api/v1/pdf/health - 127.0.0.1
2025-08-06 17:34:13,689 - __main__ - INFO - Response: 200 - pdf.health_check
2025-08-06 17:34:13,691 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:34:13] "GET /api/v1/pdf/health HTTP/1.1" 200 -
2025-08-06 17:34:25,541 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/health - 127.0.0.1
2025-08-06 17:34:25,541 - __main__ - INFO - Response: 200 - chat.health_check
2025-08-06 17:34:25,541 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:34:25] "GET /api/v1/chat/health HTTP/1.1" 200 -
2025-08-06 17:34:34,501 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:34:34,502 - __main__ - INFO - Response: 200 - chat.list_active_sessions
2025-08-06 17:34:34,502 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:34:34] "GET /api/v1/chat/sessions HTTP/1.1" 200 -
2025-08-06 17:34:47,689 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:34:47,695 - src.services.chat_service - INFO - Created chat session: a4512091-ceb6-499d-b189-9fbe673d699d
2025-08-06 17:34:47,697 - src.api.chat_routes - INFO - Created chat session: a4512091-ceb6-499d-b189-9fbe673d699d
2025-08-06 17:34:47,697 - src.utils.helpers - INFO - create_chat_session executed in 0.008s
2025-08-06 17:34:47,697 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 17:34:47,697 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:34:47] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 17:34:54,543 - __main__ - INFO - GET http://localhost:5000/api/v1/pdf/templates - 127.0.0.1
2025-08-06 17:34:54,543 - __main__ - INFO - Response: 200 - pdf.get_pdf_templates
2025-08-06 17:34:54,546 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:34:54] "GET /api/v1/pdf/templates HTTP/1.1" 200 -
2025-08-06 17:35:05,403 - __main__ - INFO - POST http://localhost:5000/api/v1/pdf/generate - 127.0.0.1
2025-08-06 17:35:05,411 - src.services.pdf_service - ERROR - HTML generation failed for template default_template: 'default_template.html' not found in search path: 'd:\\shobbak\\AutomatingLetter\\LetterToPdf\\templates'
2025-08-06 17:35:05,549 - src.utils.exceptions - ERROR - Operation failed: pdf_generation
2025-08-06 17:35:05,549 - src.api.pdf_routes - ERROR - PDF generation failed: PDF generation error in generate_pdf: PDF generation failed: No wkhtmltopdf executable found: "b''"
If this file exists please check that this process can read it or you can pass path to it manually in method call, check README. Otherwise please install wkhtmltopdf - https://github.com/JazzCore/python-pdfkit/wiki/Installing-wkhtmltopdf
2025-08-06 17:35:05,549 - src.utils.helpers - INFO - generate_pdf executed in 0.146s
2025-08-06 17:35:05,549 - __main__ - INFO - Response: 500 - pdf.generate_pdf
2025-08-06 17:35:05,549 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:35:05] "[35m[1mPOST /api/v1/pdf/generate HTTP/1.1[0m" 500 -
2025-08-06 17:35:51,561 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/categories - 127.0.0.1
2025-08-06 17:35:51,561 - __main__ - INFO - Response: 200 - letter.get_letter_categories
2025-08-06 17:35:51,561 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:35:51] "GET /api/v1/letter/categories HTTP/1.1" 200 -
2025-08-06 17:36:23,850 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:36:23,850 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:36:25,642 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 17:36:25,642 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 17:36:27,330 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:36:33,097 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:36:33,098 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:36:33,150 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:36:33,157 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:36:49,018 - __main__ - INFO - GET http://localhost:5000/ - 127.0.0.1
2025-08-06 17:36:49,018 - __main__ - INFO - Response: 200 - root
2025-08-06 17:36:49,019 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:36:49] "GET / HTTP/1.1" 200 -
2025-08-06 17:36:55,587 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:36:55,588 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 17:36:56,850 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 17:36:56,851 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:36:56,852 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:36:56,857 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:36:56,906 - __main__ - INFO - Response: 200 - health_check
2025-08-06 17:36:56,906 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:36:56] "GET /health HTTP/1.1" 200 -
2025-08-06 17:37:22,938 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:37:22,963 - werkzeug - INFO -  * Detected change in 'C:\\Python313\\Lib\\netrc.py', reloading
2025-08-06 17:37:25,211 - src.utils.helpers - INFO - get_data_by_key executed in 2.256s
2025-08-06 17:37:25,229 - src.utils.helpers - INFO - get_data_by_key executed in 2.272s
2025-08-06 17:37:25,295 - src.utils.helpers - INFO - get_data_by_key executed in 2.348s
2025-08-06 17:37:25,470 - src.utils.helpers - INFO - get_data_by_key executed in 2.514s
2025-08-06 17:37:25,476 - src.utils.helpers - INFO - get_letter_config_by_category executed in 2.529s
2025-08-06 17:37:25,478 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-39070
2025-08-06 17:37:25,755 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:37:29,683 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:37:29,683 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:37:29,716 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:37:29,722 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:37:56,632 - __main__ - INFO - Creating production application
2025-08-06 17:39:06,088 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:39:06,089 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:39:06,141 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 17:39:06,142 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 17:39:06,158 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:39:09,763 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:39:09,764 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:39:09,792 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:39:09,798 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:39:27,633 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:39:27,634 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 17:39:28,710 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 17:39:28,711 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:39:28,711 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:39:28,715 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:39:28,810 - __main__ - INFO - Response: 200 - health_check
2025-08-06 17:39:28,810 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:39:28] "GET /health HTTP/1.1" 200 -
2025-08-06 17:40:02,380 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:40:02,392 - src.api.letter_routes - WARNING - Validation error in letter generation: 1 validation error for GenerateLetterRequest
prompt
  String should have at least 10 characters [type=string_too_short, input_value='???? ????', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/string_too_short
2025-08-06 17:40:02,393 - src.utils.helpers - INFO - generate_letter executed in 0.012s
2025-08-06 17:40:02,393 - __main__ - INFO - Response: 400 - letter.generate_letter
2025-08-06 17:40:02,393 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:40:02] "[31m[1mPOST /api/v1/letter/generate HTTP/1.1[0m" 400 -
2025-08-06 17:40:22,887 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:40:25,086 - src.utils.helpers - INFO - get_data_by_key executed in 2.180s
2025-08-06 17:40:25,092 - src.utils.helpers - INFO - get_data_by_key executed in 2.187s
2025-08-06 17:40:25,103 - src.utils.helpers - INFO - get_data_by_key executed in 2.210s
2025-08-06 17:40:25,283 - src.utils.helpers - INFO - get_data_by_key executed in 2.379s
2025-08-06 17:40:25,283 - src.utils.helpers - INFO - get_letter_config_by_category executed in 2.390s
2025-08-06 17:40:25,284 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-17892
2025-08-06 17:40:32,126 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 17:40:32,139 - src.services.letter_generator - ERROR - Letter generation failed for ID LET-20250806-17892: Invalid response type: <class 'dict'>
2025-08-06 17:40:32,140 - src.utils.exceptions - ERROR - Operation failed: letter_generation
2025-08-06 17:40:32,140 - src.utils.helpers - ERROR - generate_letter failed after 6.856s: Failed to generate letter: Invalid response type: <class 'dict'>
2025-08-06 17:40:32,140 - src.api.letter_routes - ERROR - Letter generation failed: AI service error: Failed to generate letter: Invalid response type: <class 'dict'>
2025-08-06 17:40:32,141 - src.utils.helpers - INFO - generate_letter executed in 9.253s
2025-08-06 17:40:32,141 - __main__ - INFO - Response: 500 - letter.generate_letter
2025-08-06 17:40:32,142 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:40:32] "[35m[1mPOST /api/v1/letter/generate HTTP/1.1[0m" 500 -
2025-08-06 17:40:59,973 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\__init__.py', reloading
2025-08-06 17:40:59,987 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\errors.py', reloading
2025-08-06 17:41:00,002 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\main.py', reloading
2025-08-06 17:41:00,033 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\networks.py', reloading
2025-08-06 17:41:00,046 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\tools.py', reloading
2025-08-06 17:41:00,051 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\types.py', reloading
2025-08-06 17:41:00,071 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\utils.py', reloading
2025-08-06 17:41:00,083 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\fields.py', reloading
2025-08-06 17:41:00,104 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\typing.py', reloading
2025-08-06 17:41:01,027 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:41:05,238 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:41:05,239 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:41:05,275 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:41:05,280 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:41:34,747 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\letter_generator.py', reloading
2025-08-06 17:41:34,750 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\letter_generator.py', reloading
2025-08-06 17:41:35,105 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:41:39,139 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:41:39,140 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:41:39,177 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:41:39,184 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:41:54,575 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:41:56,864 - src.utils.helpers - INFO - get_data_by_key executed in 2.276s
2025-08-06 17:41:56,872 - src.utils.helpers - INFO - get_data_by_key executed in 2.285s
2025-08-06 17:41:56,876 - src.utils.helpers - INFO - get_data_by_key executed in 2.288s
2025-08-06 17:41:56,878 - src.utils.helpers - INFO - get_data_by_key executed in 2.289s
2025-08-06 17:41:56,880 - src.utils.helpers - INFO - get_letter_config_by_category executed in 2.293s
2025-08-06 17:41:56,880 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 17:41:57,943 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 17:41:57,944 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-52324
2025-08-06 17:42:12,625 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 17:42:12,637 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-52324
2025-08-06 17:42:12,637 - src.utils.helpers - INFO - generate_letter executed in 14.694s
2025-08-06 17:42:12,637 - src.api.letter_routes - INFO - Letter generated successfully: LET-20250806-52324
2025-08-06 17:42:12,638 - src.utils.helpers - INFO - generate_letter executed in 18.062s
2025-08-06 17:42:12,638 - __main__ - INFO - Response: 200 - letter.generate_letter
2025-08-06 17:42:12,638 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:42:12] "POST /api/v1/letter/generate HTTP/1.1" 200 -
2025-08-06 17:42:45,354 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:42:45,362 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:42:45,362 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:42:45,362 - src.services.chat_service - INFO - Created chat session: 119144ba-006c-4c6f-954b-ca435291368e
2025-08-06 17:42:45,363 - src.api.chat_routes - INFO - Created chat session: 119144ba-006c-4c6f-954b-ca435291368e
2025-08-06 17:42:45,363 - src.utils.helpers - INFO - create_chat_session executed in 0.009s
2025-08-06 17:42:45,363 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 17:42:45,363 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:42:45] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 17:43:08,135 - __main__ - INFO - POST http://localhost:5000/api/v1/pdf/generate - 127.0.0.1
2025-08-06 17:43:08,140 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:43:08,141 - src.services.pdf_service - ERROR - HTML generation failed for template default_template: 'default_template.html' not found in search path: 'D:\\shobbak\\AutomatingLetter\\LetterToPdf\\templates'
2025-08-06 17:43:08,271 - src.utils.exceptions - ERROR - Operation failed: pdf_generation
2025-08-06 17:43:08,272 - src.api.pdf_routes - ERROR - PDF generation failed: PDF generation error in generate_pdf: PDF generation failed: No wkhtmltopdf executable found: "b''"
If this file exists please check that this process can read it or you can pass path to it manually in method call, check README. Otherwise please install wkhtmltopdf - https://github.com/JazzCore/python-pdfkit/wiki/Installing-wkhtmltopdf
2025-08-06 17:43:08,272 - src.utils.helpers - INFO - generate_pdf executed in 0.136s
2025-08-06 17:43:08,272 - __main__ - INFO - Response: 500 - pdf.generate_pdf
2025-08-06 17:43:08,272 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:43:08] "[35m[1mPOST /api/v1/pdf/generate HTTP/1.1[0m" 500 -
2025-08-06 17:45:48,248 - __main__ - INFO - GET http://localhost:5000/api/v1/templates/list - 127.0.0.1
2025-08-06 17:45:48,250 - __main__ - INFO - Response: 404 - None
2025-08-06 17:45:48,251 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:45:48] "[33mGET /api/v1/templates/list HTTP/1.1[0m" 404 -
2025-08-06 17:45:52,933 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\example_client.py', reloading
2025-08-06 17:45:54,164 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:45:58,167 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:45:58,168 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:45:58,200 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:45:58,207 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:46:28,682 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/categories - 127.0.0.1
2025-08-06 17:46:28,683 - __main__ - INFO - Response: 200 - letter.get_letter_categories
2025-08-06 17:46:28,684 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:46:28] "GET /api/v1/letter/categories HTTP/1.1" 200 -
2025-08-06 17:46:36,216 - __main__ - INFO - GET http://localhost:5000/api/v1/pdf/health - 127.0.0.1
2025-08-06 17:46:36,222 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:46:36,224 - __main__ - INFO - Response: 200 - pdf.health_check
2025-08-06 17:46:36,224 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:46:36] "GET /api/v1/pdf/health HTTP/1.1" 200 -
2025-08-06 17:46:47,348 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/health - 127.0.0.1
2025-08-06 17:46:47,349 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:46:47,350 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:46:47,350 - __main__ - INFO - Response: 200 - chat.health_check
2025-08-06 17:46:47,350 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:46:47] "GET /api/v1/chat/health HTTP/1.1" 200 -
2025-08-06 17:47:23,580 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\google_services.py', reloading
2025-08-06 17:47:23,580 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\letter_generator.py', reloading
2025-08-06 17:47:23,581 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\letter_generator.py', reloading
2025-08-06 17:47:23,581 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\google_services.py', reloading
2025-08-06 17:47:24,193 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:47:28,382 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:47:28,383 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:47:28,427 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:47:28,432 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:47:39,425 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 17:47:39,425 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 17:47:41,589 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 17:47:41,590 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 17:47:41,590 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 17:47:41,607 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:47:41,710 - __main__ - INFO - Response: 200 - health_check
2025-08-06 17:47:41,712 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:47:41] "GET /health HTTP/1.1" 200 -
2025-08-06 17:47:45,490 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 17:47:48,025 - src.utils.helpers - INFO - get_data_by_key executed in 2.525s
2025-08-06 17:47:48,044 - src.utils.helpers - INFO - get_data_by_key executed in 2.542s
2025-08-06 17:47:48,046 - src.utils.helpers - INFO - get_data_by_key executed in 2.554s
2025-08-06 17:47:48,251 - src.utils.helpers - INFO - get_data_by_key executed in 2.748s
2025-08-06 17:47:48,253 - src.utils.helpers - INFO - get_letter_config_by_category executed in 2.761s
2025-08-06 17:47:48,255 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-30058
2025-08-06 17:47:52,994 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 17:47:53,012 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-30058
2025-08-06 17:47:53,012 - src.utils.helpers - INFO - generate_letter executed in 4.759s
2025-08-06 17:47:53,013 - src.api.letter_routes - INFO - Letter generated successfully: LET-20250806-30058
2025-08-06 17:47:53,013 - src.utils.helpers - INFO - generate_letter executed in 7.523s
2025-08-06 17:47:53,014 - __main__ - INFO - Response: 200 - letter.generate_letter
2025-08-06 17:47:53,015 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:47:53] "POST /api/v1/letter/generate HTTP/1.1" 200 -
2025-08-06 17:49:25,908 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:49:25,909 - src.services.chat_service - INFO - Created chat session: 418b6dd5-b094-44ae-9ffd-99e0de20c99e
2025-08-06 17:49:25,909 - src.api.chat_routes - INFO - Created chat session: 418b6dd5-b094-44ae-9ffd-99e0de20c99e
2025-08-06 17:49:25,909 - src.utils.helpers - INFO - create_chat_session executed in 0.001s
2025-08-06 17:49:25,909 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 17:49:25,909 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:49:25] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 17:49:30,655 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:49:30,656 - src.api.chat_routes - ERROR - Failed to create chat session: 400 Bad Request: Failed to decode JSON object: Illegal trailing comma before end of object: line 2 column 48 (char 50)
2025-08-06 17:49:30,656 - src.utils.helpers - INFO - create_chat_session executed in 0.001s
2025-08-06 17:49:30,657 - __main__ - INFO - Response: 500 - chat.create_chat_session
2025-08-06 17:49:30,657 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:49:30] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 500 -
2025-08-06 17:49:37,860 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:49:37,861 - src.services.chat_service - INFO - Created chat session: 0a98f18e-f986-4e41-bd08-13856aa3a948
2025-08-06 17:49:37,861 - src.api.chat_routes - INFO - Created chat session: 0a98f18e-f986-4e41-bd08-13856aa3a948
2025-08-06 17:49:37,861 - src.utils.helpers - INFO - create_chat_session executed in 0.001s
2025-08-06 17:49:37,862 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 17:49:37,862 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:49:37] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 17:49:49,925 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 17:49:49,925 - src.services.chat_service - INFO - Created chat session: cf424ddd-2955-4e78-9508-41c4cab41ce3
2025-08-06 17:49:49,926 - src.api.chat_routes - INFO - Created chat session: cf424ddd-2955-4e78-9508-41c4cab41ce3
2025-08-06 17:49:49,926 - src.utils.helpers - INFO - create_chat_session executed in 0.001s
2025-08-06 17:49:49,926 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 17:49:49,926 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:49:49] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 17:50:51,133 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit - 127.0.0.1
2025-08-06 17:50:51,133 - __main__ - INFO - Response: 405 - None
2025-08-06 17:50:51,134 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:50:51] "[31m[1mGET /api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit HTTP/1.1[0m" 405 -
2025-08-06 17:52:22,607 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\blueprints.py', reloading
2025-08-06 17:52:22,611 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\sansio\\blueprints.py', reloading
2025-08-06 17:52:22,745 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\helpers.py', reloading
2025-08-06 17:52:22,761 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\_internal.py', reloading
2025-08-06 17:52:23,521 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:52:27,710 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:52:27,710 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:52:27,745 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:52:27,751 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:53:37,374 - __main__ - INFO - POST http://localhost:5000/api/v1/pdf/generate - 127.0.0.1
2025-08-06 17:53:37,378 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 17:53:37,511 - src.utils.exceptions - ERROR - Operation failed: pdf_generation
2025-08-06 17:53:37,512 - src.api.pdf_routes - ERROR - PDF generation failed: PDF generation error in generate_pdf: PDF generation failed: No wkhtmltopdf executable found: "b''"
If this file exists please check that this process can read it or you can pass path to it manually in method call, check README. Otherwise please install wkhtmltopdf - https://github.com/JazzCore/python-pdfkit/wiki/Installing-wkhtmltopdf
2025-08-06 17:53:37,512 - src.utils.helpers - INFO - generate_pdf executed in 0.137s
2025-08-06 17:53:37,512 - __main__ - INFO - Response: 500 - pdf.generate_pdf
2025-08-06 17:53:37,513 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 17:53:37] "[35m[1mPOST /api/v1/pdf/generate HTTP/1.1[0m" 500 -
2025-08-06 17:58:11,186 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\LetterToPdf\\letterToPdf.py', reloading
2025-08-06 17:58:11,554 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\__init__.py', reloading
2025-08-06 17:58:11,569 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\errors.py', reloading
2025-08-06 17:58:11,677 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\main.py', reloading
2025-08-06 17:58:11,818 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\networks.py', reloading
2025-08-06 17:58:11,847 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\types.py', reloading
2025-08-06 17:58:11,875 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\deprecated\\tools.py', reloading
2025-08-06 17:58:13,278 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:58:20,632 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:58:20,632 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:58:20,686 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:58:20,694 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:58:49,638 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\drive_logger.py', reloading
2025-08-06 17:58:50,282 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_openai\\__init__.py', reloading
2025-08-06 17:58:50,361 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_openai\\chat_models\\__init__.py', reloading
2025-08-06 17:58:50,364 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py', reloading
2025-08-06 17:58:50,388 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\callbacks\\__init__.py', reloading
2025-08-06 17:58:50,390 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py', reloading
2025-08-06 17:58:50,394 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\messages\\__init__.py', reloading
2025-08-06 17:58:50,398 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\__init__.py', reloading
2025-08-06 17:58:50,407 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\caches.py', reloading
2025-08-06 17:58:50,409 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\language_models\\base.py', reloading
2025-08-06 17:58:50,411 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompt_values.py', reloading
2025-08-06 17:58:50,417 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\base.py', reloading
2025-08-06 17:58:50,660 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:58:55,064 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:58:55,137 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:58:55,196 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:58:55,201 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 17:59:26,549 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\google_services.py', reloading
2025-08-06 17:59:26,550 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\google_services.py', reloading
2025-08-06 17:59:27,344 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 17:59:31,752 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 17:59:31,752 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 17:59:31,781 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 17:59:31,786 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:00:19,476 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\enhanced_pdf_service.py', reloading
2025-08-06 18:00:20,976 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:00:25,221 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:00:25,222 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:00:25,261 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:00:25,269 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:00:55,092 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\archive_routes.py', reloading
2025-08-06 18:00:55,629 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\utils.py', reloading
2025-08-06 18:00:55,631 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\fields.py', reloading
2025-08-06 18:00:55,632 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_migration.py', reloading
2025-08-06 18:00:55,632 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic_core\\__init__.py', reloading
2025-08-06 18:00:55,633 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic_core\\core_schema.py', reloading
2025-08-06 18:00:55,634 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\aliases.py', reloading
2025-08-06 18:00:55,635 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\config.py', reloading
2025-08-06 18:00:55,642 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_repr.py', reloading
2025-08-06 18:00:55,642 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_model_construction.py', reloading
2025-08-06 18:00:55,645 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\annotated_types\\__init__.py', reloading
2025-08-06 18:00:55,646 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_internal_dataclass.py', reloading
2025-08-06 18:00:55,741 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain\\prompts\\__init__.py', reloading
2025-08-06 18:00:55,759 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\language_models\\__init__.py', reloading
2025-08-06 18:00:55,771 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\base.py', reloading
2025-08-06 18:00:55,793 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\__init__.py', reloading
2025-08-06 18:00:55,796 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\prompt.py', reloading
2025-08-06 18:00:55,797 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\string.py', reloading
2025-08-06 18:00:55,800 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\gspread\\__init__.py', reloading
2025-08-06 18:00:55,801 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\oauth2client\\service_account.py', reloading
2025-08-06 18:00:56,333 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:01:00,215 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:01:00,216 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:01:00,248 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:01:00,255 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:01:25,845 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\__init__.py', reloading
2025-08-06 18:01:26,784 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:01:31,537 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:01:31,537 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:01:31,565 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:01:31,586 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:01:41,214 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\__init__.py', reloading
2025-08-06 18:01:41,214 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\__init__.py', reloading
2025-08-06 18:01:42,125 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:11:53,027 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:11:53,027 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:11:53,151 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 18:11:53,151 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 18:11:53,182 - werkzeug - INFO -  * Restarting with stat
2025-08-06 18:11:56,950 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:11:56,950 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:11:56,973 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:11:56,983 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 18:12:02,750 - __main__ - INFO - GET http://localhost:5000/api/v1/archive/health - 127.0.0.1
2025-08-06 18:12:02,892 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 18:12:02,892 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 18:12:02,892 - __main__ - INFO - Response: 200 - archive.health_check
2025-08-06 18:12:02,892 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:12:02] "GET /api/v1/archive/health HTTP/1.1" 200 -
2025-08-06 18:12:16,352 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 18:12:16,358 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 18:12:17,390 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 18:12:17,390 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 18:12:17,390 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 18:12:17,390 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 18:12:17,452 - __main__ - INFO - Response: 200 - health_check
2025-08-06 18:12:17,452 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:12:17] "GET /health HTTP/1.1" 200 -
2025-08-06 18:12:36,408 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 18:12:36,414 - src.api.archive_routes - INFO - Starting background archiving for letter ID: TEST-ARCHIVE-001
2025-08-06 18:12:36,414 - src.api.archive_routes - INFO - Letter archiving initiated for ID: TEST-ARCHIVE-001
2025-08-06 18:12:36,414 - src.api.archive_routes - INFO - Generating PDF for letter ID: TEST-ARCHIVE-001
2025-08-06 18:12:36,416 - src.utils.helpers - INFO - archive_letter executed in 0.007s
2025-08-06 18:12:36,417 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 18:12:36,417 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:12:36] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 18:13:01,786 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:13:07,698 - src.services.enhanced_pdf_service - ERROR - Error converting HTML to PDF: [Errno 22] Invalid argument: 'C:\\Users\\ZIAD~1.ABD\\AppData\\Local\\Temp\\letter_pdfs\\????_????_??????_LET-20250806-15863.pdf'
2025-08-06 18:13:07,702 - src.services.enhanced_pdf_service - ERROR - PDF generation failed: [Errno 22] Invalid argument: 'C:\\Users\\ZIAD~1.ABD\\AppData\\Local\\Temp\\letter_pdfs\\????_????_??????_LET-20250806-15863.pdf'
2025-08-06 18:13:07,704 - src.utils.exceptions - ERROR - Operation failed: pdf_generation
2025-08-06 18:13:07,704 - src.api.archive_routes - ERROR - Error in background archiving for letter ID TEST-ARCHIVE-001: PDF generation error in generate_pdf: [Errno 22] Invalid argument: 'C:\\Users\\ZIAD~1.ABD\\AppData\\Local\\Temp\\letter_pdfs\\????_????_??????_LET-20250806-15863.pdf'
Traceback (most recent call last):
  File "D:\shobbak\AutomatingLetter\src\utils\exceptions.py", line 203, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "D:\shobbak\AutomatingLetter\src\services\enhanced_pdf_service.py", line 236, in generate_pdf
    self.html_to_pdf(html_content, str(output_path))
  File "D:\shobbak\AutomatingLetter\src\services\enhanced_pdf_service.py", line 197, in html_to_pdf
    asyncio.run(self.html_to_pdf_async(html_content, pdf_path))
  File "C:\Users\ziad.abdlhamed\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\ziad.abdlhamed\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ziad.abdlhamed\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 650, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "D:\shobbak\AutomatingLetter\src\services\enhanced_pdf_service.py", line 189, in html_to_pdf_async
    await page.pdf(path=pdf_path, format="A4", print_background=True)
  File "D:\shobbak\AutomatingLetter\.venv\Lib\site-packages\playwright\async_api\_generated.py", line 11599, in pdf
    await self._impl_obj.pdf(
  File "D:\shobbak\AutomatingLetter\.venv\Lib\site-packages\playwright\_impl\_page.py", line 1172, in pdf
    await async_writefile(path, decoded_binary)
  File "D:\shobbak\AutomatingLetter\.venv\Lib\site-packages\playwright\_impl\_helper.py", line 496, in async_writefile
    await loop.run_in_executor(None, inner)
  File "C:\Users\ziad.abdlhamed\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\shobbak\AutomatingLetter\.venv\Lib\site-packages\playwright\_impl\_helper.py", line 492, in inner
    with open(file, "w" if isinstance(data, str) else "wb") as fh:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
OSError: [Errno 22] Invalid argument: 'C:\\Users\\ZIAD~1.ABD\\AppData\\Local\\Temp\\letter_pdfs\\????_????_??????_LET-20250806-15863.pdf'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\shobbak\AutomatingLetter\src\api\archive_routes.py", line 126, in process_letter_archive_in_background
    pdf_result = pdf_service.generate_pdf(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\shobbak\AutomatingLetter\src\utils\exceptions.py", line 230, in wrapper
    raise PDFGenerationError(
src.utils.exceptions.PDFGenerationError: PDF generation error in generate_pdf: [Errno 22] Invalid argument: 'C:\\Users\\ZIAD~1.ABD\\AppData\\Local\\Temp\\letter_pdfs\\????_????_??????_LET-20250806-15863.pdf'
2025-08-06 18:13:47,960 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\enhanced_pdf_service.py', reloading
2025-08-06 18:13:48,216 - werkzeug - INFO -  * Restarting with stat
2025-08-06 18:13:51,368 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:13:51,368 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:13:51,394 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:13:51,400 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 18:14:15,470 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 18:14:15,471 - src.api.archive_routes - INFO - Starting background archiving for letter ID: TEST-ARCHIVE-002
2025-08-06 18:14:15,471 - src.api.archive_routes - INFO - Letter archiving initiated for ID: TEST-ARCHIVE-002
2025-08-06 18:14:15,475 - src.utils.helpers - INFO - archive_letter executed in 0.001s
2025-08-06 18:14:15,475 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 18:14:15,476 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:14:15] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 18:14:15,559 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 18:14:15,559 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 18:14:15,559 - src.api.archive_routes - INFO - Generating PDF for letter ID: TEST-ARCHIVE-002
2025-08-06 18:14:39,026 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:14:47,916 - src.services.enhanced_pdf_service - INFO - PDF generated successfully: Invitation_Letter_LET-20250806-76226.pdf (133376 bytes) in 0.00s
2025-08-06 18:14:47,916 - src.api.archive_routes - INFO - PDF generated successfully: Invitation_Letter_LET-20250806-76226.pdf
2025-08-06 18:14:47,916 - src.api.archive_routes - INFO - Uploading to Drive and logging for letter ID: TEST-ARCHIVE-002
2025-08-06 18:14:48,576 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-08-06 18:14:52,573 - src.services.drive_logger - INFO - File uploaded to Drive: Invitation Letter_TEST-ARCHIVE-002.pdf (ID: 1SMx_geLOTxwAqDl3kWJwYKAY2Q9P7GH_)
2025-08-06 18:14:57,618 - src.services.google_services - INFO - Successfully logged 1 entries to AI Letter Generating/Submissions
2025-08-06 18:14:57,620 - src.utils.helpers - INFO - log_to_sheet executed in 5.048s
2025-08-06 18:14:57,620 - src.services.drive_logger - INFO - Successfully archived letter TEST-ARCHIVE-002 to Drive and logged to sheets
2025-08-06 18:14:57,624 - src.api.archive_routes - INFO - Background archiving completed successfully for letter ID: TEST-ARCHIVE-002
2025-08-06 18:14:57,624 - src.api.archive_routes - INFO - Drive URL: https://drive.google.com/file/d/1SMx_geLOTxwAqDl3kWJwYKAY2Q9P7GH_/view?usp=drivesdk
2025-08-06 18:15:52,259 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\enhanced_pdf_service.py', reloading
2025-08-06 18:15:52,516 - werkzeug - INFO -  * Restarting with stat
2025-08-06 18:15:56,176 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:15:56,178 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:15:56,234 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:15:56,239 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 18:17:12,322 - __main__ - INFO - POST http://localhost:5000/api/v1/pdf/generate - 127.0.0.1
2025-08-06 18:17:12,326 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 18:17:12,480 - src.utils.exceptions - ERROR - Operation failed: pdf_generation
2025-08-06 18:17:12,480 - src.api.pdf_routes - ERROR - PDF generation failed: PDF generation error in generate_pdf: PDF generation failed: No wkhtmltopdf executable found: "b''"
If this file exists please check that this process can read it or you can pass path to it manually in method call, check README. Otherwise please install wkhtmltopdf - https://github.com/JazzCore/python-pdfkit/wiki/Installing-wkhtmltopdf
2025-08-06 18:17:12,481 - src.utils.helpers - INFO - generate_pdf executed in 0.159s
2025-08-06 18:17:12,481 - __main__ - INFO - Response: 500 - pdf.generate_pdf
2025-08-06 18:17:12,481 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:17:12] "[35m[1mPOST /api/v1/pdf/generate HTTP/1.1[0m" 500 -
2025-08-06 18:18:08,657 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 18:18:08,658 - src.api.archive_routes - INFO - Starting background archiving for letter ID: UNIQUE-ID
2025-08-06 18:18:08,658 - src.api.archive_routes - INFO - Letter archiving initiated for ID: UNIQUE-ID
2025-08-06 18:18:08,660 - src.utils.helpers - INFO - archive_letter executed in 0.002s
2025-08-06 18:18:08,660 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 18:18:08,661 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:18:08] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 18:18:08,745 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 18:18:08,745 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 18:18:08,746 - src.api.archive_routes - INFO - Generating PDF for letter ID: UNIQUE-ID
2025-08-06 18:18:33,690 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:18:38,574 - src.services.enhanced_pdf_service - INFO - PDF generated successfully: Invitation_Letter_LET-20250806-84005.pdf (136649 bytes) in 0.00s
2025-08-06 18:18:38,575 - src.api.archive_routes - INFO - PDF generated successfully: Invitation_Letter_LET-20250806-84005.pdf
2025-08-06 18:18:38,576 - src.api.archive_routes - INFO - Uploading to Drive and logging for letter ID: UNIQUE-ID
2025-08-06 18:18:38,585 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-08-06 18:18:42,580 - src.services.drive_logger - INFO - File uploaded to Drive: Invitation Letter_UNIQUE-ID.pdf (ID: 1iFfZTzXNT_e6rOXGreTteOBq3Sd0b8ds)
2025-08-06 18:18:47,128 - src.services.google_services - INFO - Successfully logged 1 entries to AI Letter Generating/Submissions
2025-08-06 18:18:47,128 - src.utils.helpers - INFO - log_to_sheet executed in 4.548s
2025-08-06 18:18:47,128 - src.services.drive_logger - INFO - Successfully archived letter UNIQUE-ID to Drive and logged to sheets
2025-08-06 18:18:47,128 - src.api.archive_routes - INFO - Background archiving completed successfully for letter ID: UNIQUE-ID
2025-08-06 18:18:47,128 - src.api.archive_routes - INFO - Drive URL: https://drive.google.com/file/d/1iFfZTzXNT_e6rOXGreTteOBq3Sd0b8ds/view?usp=drivesdk
2025-08-06 18:19:10,504 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit - 127.0.0.1
2025-08-06 18:19:10,505 - __main__ - INFO - Response: 405 - None
2025-08-06 18:19:10,505 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:19:10] "[31m[1mGET /api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit HTTP/1.1[0m" 405 -
2025-08-06 18:19:16,420 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit - 127.0.0.1
2025-08-06 18:19:16,421 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:19:16,423 - __main__ - INFO - Response: 400 - chat.edit_letter_chat
2025-08-06 18:19:16,423 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:19:16] "[31m[1mPOST /api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit HTTP/1.1[0m" 400 -
2025-08-06 18:19:26,145 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 18:19:26,145 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 18:19:26,223 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 18:19:26,242 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 18:19:26,242 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 18:19:26,247 - __main__ - INFO - Response: 200 - health_check
2025-08-06 18:19:26,247 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:19:26] "GET /health HTTP/1.1" 200 -
2025-08-06 18:20:20,160 - __main__ - INFO - GET http://localhost:5000/api/v1/archive/health - 127.0.0.1
2025-08-06 18:20:20,161 - __main__ - INFO - Response: 200 - archive.health_check
2025-08-06 18:20:20,162 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:20:20] "GET /api/v1/archive/health HTTP/1.1" 200 -
2025-08-06 18:21:02,130 - __main__ - INFO - GET http://localhost:5000/api/v1/pdf/health - 127.0.0.1
2025-08-06 18:21:02,130 - __main__ - INFO - Response: 200 - pdf.health_check
2025-08-06 18:21:02,130 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:21:02] "GET /api/v1/pdf/health HTTP/1.1" 200 -
2025-08-06 18:21:37,389 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/health - 127.0.0.1
2025-08-06 18:21:37,390 - __main__ - INFO - Response: 200 - chat.health_check
2025-08-06 18:21:37,391 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:21:37] "GET /api/v1/chat/health HTTP/1.1" 200 -
2025-08-06 18:22:16,455 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/health - 127.0.0.1
2025-08-06 18:22:16,456 - __main__ - INFO - Response: 200 - letter.health_check
2025-08-06 18:22:16,456 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:22:16] "GET /api/v1/letter/health HTTP/1.1" 200 -
2025-08-06 18:24:25,019 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit - 127.0.0.1
2025-08-06 18:24:25,019 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:24:25,019 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:24:25,019 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:24:25] "[33mPOST /api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:24:26,257 - src.services.chat_service - INFO - Cleaned up 0 expired sessions
2025-08-06 18:24:29,510 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit - 127.0.0.1
2025-08-06 18:24:29,510 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:24:29,510 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:24:29,510 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:24:29] "[33mPOST /api/v1/chat/sessions/{cf424ddd-2955-4e78-9508-41c4cab41ce3}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:24:39,610 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:24:39,610 - src.services.chat_service - INFO - Created chat session: 4bde75a4-74b1-475c-8c44-015cb62cecf4
2025-08-06 18:24:39,610 - src.api.chat_routes - INFO - Created chat session: 4bde75a4-74b1-475c-8c44-015cb62cecf4
2025-08-06 18:24:39,610 - src.utils.helpers - INFO - create_chat_session executed in 0.000s
2025-08-06 18:24:39,610 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 18:24:39,619 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:24:39] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 18:25:08,789 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit - 127.0.0.1
2025-08-06 18:25:08,791 - src.utils.helpers - INFO - edit_letter_chat executed in 0.001s
2025-08-06 18:25:08,792 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:25:08,793 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:25:08] "[33mPOST /api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:25:10,445 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit - 127.0.0.1
2025-08-06 18:25:10,445 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:25:10,445 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:25:10,445 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:25:10] "[33mPOST /api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:25:15,900 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:25:15,902 - src.services.chat_service - INFO - Created chat session: aa95f0a5-678f-4e7d-a245-f2f3ef6bac9a
2025-08-06 18:25:15,902 - src.api.chat_routes - INFO - Created chat session: aa95f0a5-678f-4e7d-a245-f2f3ef6bac9a
2025-08-06 18:25:15,902 - src.utils.helpers - INFO - create_chat_session executed in 0.000s
2025-08-06 18:25:15,902 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 18:25:15,902 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:25:15] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 18:25:53,251 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:25:53,251 - __main__ - INFO - Response: 200 - chat.list_active_sessions
2025-08-06 18:25:53,251 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:25:53] "GET /api/v1/chat/sessions HTTP/1.1" 200 -
2025-08-06 18:26:16,502 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit - 127.0.0.1
2025-08-06 18:26:16,502 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:26:16,502 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:26:16,502 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:26:16] "[33mPOST /api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:26:25,177 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit - 127.0.0.1
2025-08-06 18:26:25,177 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:26:25,177 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:26:25,177 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:26:25] "[33mPOST /api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:26:32,310 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit - 127.0.0.1
2025-08-06 18:26:32,310 - src.utils.helpers - INFO - edit_letter_chat executed in 0.000s
2025-08-06 18:26:32,311 - __main__ - INFO - Response: 404 - chat.edit_letter_chat
2025-08-06 18:26:32,311 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:26:32] "[33mPOST /api/v1/chat/sessions/{4bde75a4-74b1-475c-8c44-015cb62cecf4}/edit HTTP/1.1[0m" 404 -
2025-08-06 18:26:48,811 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/4bde75a4-74b1-475c-8c44-015cb62cecf4/edit - 127.0.0.1
2025-08-06 18:26:48,811 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-38789
2025-08-06 18:26:55,666 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:26:55,696 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-38789
2025-08-06 18:26:55,696 - src.utils.helpers - INFO - generate_letter executed in 6.885s
2025-08-06 18:26:55,710 - src.services.chat_service - ERROR - Edit processing failed for session 4bde75a4-74b1-475c-8c44-015cb62cecf4: 1 validation error for ChatResponse
conversation_length
  Field required [type=missing, input_value={'session_id': '4bde75a4-...tatus.ACTIVE: 'active'>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-06 18:26:55,711 - src.utils.exceptions - ERROR - Operation failed: process_edit_request
2025-08-06 18:26:55,711 - src.api.chat_routes - ERROR - Chat edit failed for session 4bde75a4-74b1-475c-8c44-015cb62cecf4: Service error in process_edit_request: 1 validation error for ChatResponse
conversation_length
  Field required [type=missing, input_value={'session_id': '4bde75a4-...nStatus.ERROR: 'error'>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-06 18:26:55,711 - src.utils.helpers - INFO - edit_letter_chat executed in 6.900s
2025-08-06 18:26:55,711 - __main__ - INFO - Response: 500 - chat.edit_letter_chat
2025-08-06 18:26:55,714 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:26:55] "[35m[1mPOST /api/v1/chat/sessions/4bde75a4-74b1-475c-8c44-015cb62cecf4/edit HTTP/1.1[0m" 500 -
2025-08-06 18:29:26,259 - src.services.chat_service - INFO - Cleaned up 0 expired sessions
2025-08-06 18:32:06,305 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\models\\schemas.py', reloading
2025-08-06 18:32:06,935 - werkzeug - INFO -  * Restarting with stat
2025-08-06 18:32:11,377 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:32:11,378 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:32:11,402 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:32:11,409 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 18:32:12,735 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\chat_service.py', reloading
2025-08-06 18:32:12,972 - werkzeug - INFO -  * Restarting with stat
2025-08-06 18:33:53,523 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:33:53,523 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:33:53,594 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 18:33:53,594 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 18:33:53,622 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:33:57,791 - __main__ - INFO - Running with legacy endpoint compatibility
2025-08-06 18:33:57,792 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:33:57,826 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:33:57,834 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:34:19,868 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\new_app.py', reloading
2025-08-06 18:34:19,869 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\new_app.py', reloading
2025-08-06 18:34:20,210 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:34:50,822 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:34:50,891 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 18:34:50,892 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 18:34:50,910 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:34:55,110 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:34:55,144 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:34:55,153 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:35:24,250 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:35:24,272 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 18:35:24,272 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 18:35:24,272 - src.services.chat_service - INFO - Created chat session: b8a08b43-16a1-4bdc-a964-14f5443ba444
2025-08-06 18:35:24,272 - src.api.chat_routes - INFO - Created chat session: b8a08b43-16a1-4bdc-a964-14f5443ba444
2025-08-06 18:35:24,273 - src.utils.helpers - INFO - create_chat_session executed in 0.022s
2025-08-06 18:35:24,273 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 18:35:24,274 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:35:24] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 18:35:43,897 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_chat.py', reloading
2025-08-06 18:35:43,995 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_chat.py', reloading
2025-08-06 18:35:43,995 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_chat.py', reloading
2025-08-06 18:35:44,667 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:35:48,737 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:35:48,767 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:35:48,772 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:35:55,479 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:35:55,481 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 18:35:55,481 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 18:35:55,481 - src.services.chat_service - INFO - Created chat session: 9b67c1c8-b0be-456b-9f22-e1fd7a97a92d
2025-08-06 18:35:55,482 - src.api.chat_routes - INFO - Created chat session: 9b67c1c8-b0be-456b-9f22-e1fd7a97a92d
2025-08-06 18:35:55,482 - src.utils.helpers - INFO - create_chat_session executed in 0.002s
2025-08-06 18:35:55,482 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 18:35:55,486 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:35:55] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 18:35:57,572 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/9b67c1c8-b0be-456b-9f22-e1fd7a97a92d/edit - 127.0.0.1
2025-08-06 18:35:57,576 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 18:35:59,094 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 18:35:59,096 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-45988
2025-08-06 18:36:02,458 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:36:02,484 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-45988
2025-08-06 18:36:02,484 - src.utils.helpers - INFO - generate_letter executed in 3.390s
2025-08-06 18:36:02,485 - src.services.chat_service - INFO - Processed edit request for session 9b67c1c8-b0be-456b-9f22-e1fd7a97a92d in 0.00s
2025-08-06 18:36:02,486 - src.api.chat_routes - INFO - Processed chat edit for session 9b67c1c8-b0be-456b-9f22-e1fd7a97a92d
2025-08-06 18:36:02,486 - src.utils.helpers - INFO - edit_letter_chat executed in 4.914s
2025-08-06 18:36:02,486 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 18:36:02,487 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:36:02] "POST /api/v1/chat/sessions/9b67c1c8-b0be-456b-9f22-e1fd7a97a92d/edit HTTP/1.1" 200 -
2025-08-06 18:36:04,533 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/9b67c1c8-b0be-456b-9f22-e1fd7a97a92d/status - 127.0.0.1
2025-08-06 18:36:04,533 - __main__ - INFO - Response: 200 - chat.get_session_status
2025-08-06 18:36:04,534 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:36:04] "GET /api/v1/chat/sessions/9b67c1c8-b0be-456b-9f22-e1fd7a97a92d/status HTTP/1.1" 200 -
2025-08-06 18:36:27,152 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\__init__.py', reloading
2025-08-06 18:36:28,020 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:38:34,485 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:38:34,598 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 18:38:34,599 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 18:38:34,618 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:38:39,288 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:38:39,340 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:38:39,348 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:38:45,393 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:38:45,406 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 18:38:45,407 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 18:38:45,408 - src.services.chat_service - INFO - Created chat session: 9efbf995-ea5b-4c9c-a743-e4285aa7cb6e
2025-08-06 18:38:45,409 - src.api.chat_routes - INFO - Created chat session: 9efbf995-ea5b-4c9c-a743-e4285aa7cb6e
2025-08-06 18:38:45,410 - src.utils.helpers - INFO - create_chat_session executed in 0.016s
2025-08-06 18:38:45,410 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 18:38:45,412 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:38:45] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 18:38:47,491 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/9efbf995-ea5b-4c9c-a743-e4285aa7cb6e/edit - 127.0.0.1
2025-08-06 18:38:47,494 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 18:38:48,640 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 18:38:48,641 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-72917
2025-08-06 18:38:52,835 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:38:52,856 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-72917
2025-08-06 18:38:52,856 - src.utils.helpers - INFO - generate_letter executed in 4.216s
2025-08-06 18:38:52,857 - src.services.chat_service - INFO - Processed edit request for session 9efbf995-ea5b-4c9c-a743-e4285aa7cb6e in 0.00s
2025-08-06 18:38:52,857 - src.api.chat_routes - INFO - Processed chat edit for session 9efbf995-ea5b-4c9c-a743-e4285aa7cb6e
2025-08-06 18:38:52,857 - src.utils.helpers - INFO - edit_letter_chat executed in 5.365s
2025-08-06 18:38:52,857 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 18:38:52,858 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:38:52] "POST /api/v1/chat/sessions/9efbf995-ea5b-4c9c-a743-e4285aa7cb6e/edit HTTP/1.1" 200 -
2025-08-06 18:38:54,904 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/9efbf995-ea5b-4c9c-a743-e4285aa7cb6e/status - 127.0.0.1
2025-08-06 18:38:54,904 - __main__ - INFO - Response: 200 - chat.get_session_status
2025-08-06 18:38:54,905 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:38:54] "GET /api/v1/chat/sessions/9efbf995-ea5b-4c9c-a743-e4285aa7cb6e/status HTTP/1.1" 200 -
2025-08-06 18:41:07,540 - __main__ - INFO - GET http://localhost:5000/ - 127.0.0.1
2025-08-06 18:41:07,541 - __main__ - INFO - Response: 200 - root
2025-08-06 18:41:07,543 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:07] "GET / HTTP/1.1" 200 -
2025-08-06 18:41:09,582 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 18:41:09,587 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 18:41:09,647 - __main__ - INFO - Response: 200 - health_check
2025-08-06 18:41:09,648 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:09] "GET /health HTTP/1.1" 200 -
2025-08-06 18:41:11,725 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 18:41:15,260 - src.utils.helpers - INFO - get_data_by_key executed in 3.513s
2025-08-06 18:41:15,445 - src.utils.helpers - INFO - get_data_by_key executed in 3.700s
2025-08-06 18:41:15,887 - src.utils.helpers - INFO - get_data_by_key executed in 4.138s
2025-08-06 18:41:15,976 - src.utils.helpers - INFO - get_data_by_key executed in 4.239s
2025-08-06 18:41:15,979 - src.utils.helpers - INFO - get_letter_config_by_category executed in 4.243s
2025-08-06 18:41:15,980 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-96278
2025-08-06 18:41:20,507 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:41:20,515 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-96278
2025-08-06 18:41:20,516 - src.utils.helpers - INFO - generate_letter executed in 4.536s
2025-08-06 18:41:20,516 - src.api.letter_routes - INFO - Letter generated successfully: LET-20250806-96278
2025-08-06 18:41:20,517 - src.utils.helpers - INFO - generate_letter executed in 8.791s
2025-08-06 18:41:20,518 - __main__ - INFO - Response: 200 - letter.generate_letter
2025-08-06 18:41:20,518 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:20] "POST /api/v1/letter/generate HTTP/1.1" 200 -
2025-08-06 18:41:22,590 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/validate - 127.0.0.1
2025-08-06 18:41:22,591 - src.utils.helpers - INFO - validate_letter executed in 0.000s
2025-08-06 18:41:22,592 - __main__ - INFO - Response: 200 - letter.validate_letter
2025-08-06 18:41:22,593 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:22] "POST /api/v1/letter/validate HTTP/1.1" 200 -
2025-08-06 18:41:24,676 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:41:24,677 - src.services.chat_service - INFO - Created chat session: b0cbc093-fee8-447a-b3ef-57e915829101
2025-08-06 18:41:24,677 - src.api.chat_routes - INFO - Created chat session: b0cbc093-fee8-447a-b3ef-57e915829101
2025-08-06 18:41:24,677 - src.utils.helpers - INFO - create_chat_session executed in 0.001s
2025-08-06 18:41:24,678 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 18:41:24,678 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:24] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 18:41:26,724 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/edit - 127.0.0.1
2025-08-06 18:41:26,725 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-04811
2025-08-06 18:41:38,150 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:41:38,156 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-04811
2025-08-06 18:41:38,157 - src.utils.helpers - INFO - generate_letter executed in 11.432s
2025-08-06 18:41:38,158 - src.services.chat_service - INFO - Processed edit request for session b0cbc093-fee8-447a-b3ef-57e915829101 in 0.00s
2025-08-06 18:41:38,159 - src.api.chat_routes - INFO - Processed chat edit for session b0cbc093-fee8-447a-b3ef-57e915829101
2025-08-06 18:41:38,160 - src.utils.helpers - INFO - edit_letter_chat executed in 11.435s
2025-08-06 18:41:38,161 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 18:41:38,162 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:38] "POST /api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/edit HTTP/1.1" 200 -
2025-08-06 18:41:41,237 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/edit - 127.0.0.1
2025-08-06 18:41:41,238 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-56852
2025-08-06 18:41:45,215 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:41:45,226 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-56852
2025-08-06 18:41:45,227 - src.utils.helpers - INFO - generate_letter executed in 3.989s
2025-08-06 18:41:45,228 - src.services.chat_service - INFO - Processed edit request for session b0cbc093-fee8-447a-b3ef-57e915829101 in 0.00s
2025-08-06 18:41:45,228 - src.api.chat_routes - INFO - Processed chat edit for session b0cbc093-fee8-447a-b3ef-57e915829101
2025-08-06 18:41:45,228 - src.utils.helpers - INFO - edit_letter_chat executed in 3.991s
2025-08-06 18:41:45,229 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 18:41:45,230 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:45] "POST /api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/edit HTTP/1.1" 200 -
2025-08-06 18:41:48,326 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/status - 127.0.0.1
2025-08-06 18:41:48,327 - __main__ - INFO - Response: 200 - chat.get_session_status
2025-08-06 18:41:48,328 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:48] "GET /api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/status HTTP/1.1" 200 -
2025-08-06 18:41:50,407 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/history?limit=10 - 127.0.0.1
2025-08-06 18:41:50,408 - src.utils.helpers - INFO - get_chat_history executed in 0.000s
2025-08-06 18:41:50,408 - __main__ - INFO - Response: 200 - chat.get_chat_history
2025-08-06 18:41:50,409 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:50] "GET /api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101/history?limit=10 HTTP/1.1" 200 -
2025-08-06 18:41:52,454 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 18:41:52,455 - __main__ - INFO - Response: 200 - chat.list_active_sessions
2025-08-06 18:41:52,455 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:52] "GET /api/v1/chat/sessions HTTP/1.1" 200 -
2025-08-06 18:41:54,516 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 18:41:54,528 - src.api.archive_routes - INFO - Starting background archiving for letter ID: LET-20250806-96278
2025-08-06 18:41:54,529 - src.api.archive_routes - INFO - Letter archiving initiated for ID: LET-20250806-96278
2025-08-06 18:41:54,529 - src.utils.helpers - INFO - archive_letter executed in 0.013s
2025-08-06 18:41:54,530 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 18:41:54,530 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:54] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 18:41:54,846 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 18:41:54,846 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 18:41:54,847 - src.api.archive_routes - INFO - Generating PDF for letter ID: LET-20250806-96278
2025-08-06 18:41:56,599 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/invalid-session-id/status - 127.0.0.1
2025-08-06 18:41:56,600 - __main__ - INFO - Response: 404 - chat.get_session_status
2025-08-06 18:41:56,601 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:56] "[33mGET /api/v1/chat/sessions/invalid-session-id/status HTTP/1.1[0m" 404 -
2025-08-06 18:41:58,664 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 18:41:58,675 - src.api.letter_routes - WARNING - Validation error in letter generation: 4 validation errors for GenerateLetterRequest
category
  Field required [type=missing, input_value={'invalid': 'data'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
recipient
  Field required [type=missing, input_value={'invalid': 'data'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
prompt
  Field required [type=missing, input_value={'invalid': 'data'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_first
  Field required [type=missing, input_value={'invalid': 'data'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-06 18:41:58,676 - src.utils.helpers - INFO - generate_letter executed in 0.011s
2025-08-06 18:41:58,676 - __main__ - INFO - Response: 400 - letter.generate_letter
2025-08-06 18:41:58,677 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:41:58] "[31m[1mPOST /api/v1/letter/generate HTTP/1.1[0m" 400 -
2025-08-06 18:42:00,738 - __main__ - INFO - DELETE http://localhost:5000/api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101 - 127.0.0.1
2025-08-06 18:42:00,739 - src.services.chat_service - INFO - Deleted session: b0cbc093-fee8-447a-b3ef-57e915829101
2025-08-06 18:42:00,740 - src.api.chat_routes - INFO - Deleted chat session: b0cbc093-fee8-447a-b3ef-57e915829101
2025-08-06 18:42:00,741 - src.utils.helpers - INFO - delete_chat_session executed in 0.001s
2025-08-06 18:42:00,741 - __main__ - INFO - Response: 200 - chat.delete_chat_session
2025-08-06 18:42:00,743 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 18:42:00] "DELETE /api/v1/chat/sessions/b0cbc093-fee8-447a-b3ef-57e915829101 HTTP/1.1" 200 -
2025-08-06 18:42:19,408 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 18:42:22,024 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\_impl\\_connection.py', reloading
2025-08-06 18:42:22,706 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:42:27,102 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:42:27,141 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:42:27,156 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 18:43:19,830 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\chat_routes.py', reloading
2025-08-06 18:43:19,831 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\models\\schemas.py', reloading
2025-08-06 18:43:19,832 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\__init__.py', reloading
2025-08-06 18:43:19,833 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\chat_service.py', reloading
2025-08-06 18:43:19,833 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\new_app.py', reloading
2025-08-06 18:43:19,834 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\models\\schemas.py', reloading
2025-08-06 18:43:19,835 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\__init__.py', reloading
2025-08-06 18:43:19,837 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\chat_routes.py', reloading
2025-08-06 18:43:19,839 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_complete_workflow.py', reloading
2025-08-06 18:43:19,839 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\chat_service.py', reloading
2025-08-06 18:43:19,839 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\new_app.py', reloading
2025-08-06 18:43:19,840 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_chat.py', reloading
2025-08-06 18:43:19,840 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\new_app.py', reloading
2025-08-06 18:43:19,841 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\chat_service.py', reloading
2025-08-06 18:43:19,841 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_complete_workflow.py', reloading
2025-08-06 18:43:19,842 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_chat.py', reloading
2025-08-06 18:43:20,871 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 18:43:25,208 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 18:43:25,243 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 18:43:25,250 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 19:02:47,618 - __main__ - INFO - POST http://localhost:5000/api/v1/letter/generate - 127.0.0.1
2025-08-06 19:02:50,787 - src.utils.helpers - INFO - get_data_by_key executed in 3.162s
2025-08-06 19:02:51,418 - src.utils.helpers - INFO - get_data_by_key executed in 3.791s
2025-08-06 19:02:51,874 - src.utils.helpers - INFO - get_data_by_key executed in 4.248s
2025-08-06 19:02:52,167 - src.utils.helpers - INFO - get_data_by_key executed in 4.541s
2025-08-06 19:02:52,167 - src.utils.helpers - INFO - get_letter_config_by_category executed in 4.544s
2025-08-06 19:02:52,168 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 19:02:53,721 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 19:02:53,722 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-64224
2025-08-06 19:02:58,185 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:02:58,194 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-64224
2025-08-06 19:02:58,195 - src.utils.helpers - INFO - generate_letter executed in 4.473s
2025-08-06 19:02:58,195 - src.api.letter_routes - INFO - Letter generated successfully: LET-20250806-64224
2025-08-06 19:02:58,195 - src.utils.helpers - INFO - generate_letter executed in 10.575s
2025-08-06 19:02:58,196 - __main__ - INFO - Response: 200 - letter.generate_letter
2025-08-06 19:02:58,197 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:02:58] "POST /api/v1/letter/generate HTTP/1.1" 200 -
2025-08-06 19:03:31,993 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 19:03:31,994 - src.api.chat_routes - ERROR - Failed to create chat session: 400 Bad Request: Failed to decode JSON object: Expecting ',' delimiter: line 3 column 44 (char 751)
2025-08-06 19:03:31,994 - src.utils.helpers - INFO - create_chat_session executed in 0.000s
2025-08-06 19:03:31,995 - __main__ - INFO - Response: 500 - chat.create_chat_session
2025-08-06 19:03:31,995 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:03:31] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 500 -
2025-08-06 19:03:45,651 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 19:03:45,652 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 19:03:45,652 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 19:03:45,652 - src.services.chat_service - INFO - Created chat session: b803cb38-94b2-4956-986c-7fcaef992508
2025-08-06 19:03:45,652 - src.api.chat_routes - INFO - Created chat session: b803cb38-94b2-4956-986c-7fcaef992508
2025-08-06 19:03:45,653 - src.utils.helpers - INFO - create_chat_session executed in 0.001s
2025-08-06 19:03:45,653 - __main__ - INFO - Response: 201 - chat.create_chat_session
2025-08-06 19:03:45,653 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:03:45] "[35m[1mPOST /api/v1/chat/sessions HTTP/1.1[0m" 201 -
2025-08-06 19:04:40,691 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/edit - 127.0.0.1
2025-08-06 19:04:40,692 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-08527
2025-08-06 19:04:46,046 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:04:46,052 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-08527
2025-08-06 19:04:46,053 - src.utils.helpers - INFO - generate_letter executed in 5.361s
2025-08-06 19:04:46,054 - src.services.chat_service - INFO - Processed edit request for session b803cb38-94b2-4956-986c-7fcaef992508 in 0.00s
2025-08-06 19:04:46,054 - src.api.chat_routes - INFO - Processed chat edit for session b803cb38-94b2-4956-986c-7fcaef992508
2025-08-06 19:04:46,055 - src.utils.helpers - INFO - edit_letter_chat executed in 5.364s
2025-08-06 19:04:46,056 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 19:04:46,057 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:04:46] "POST /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/edit HTTP/1.1" 200 -
2025-08-06 19:05:17,550 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/edit - 127.0.0.1
2025-08-06 19:05:17,551 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-04678
2025-08-06 19:05:21,061 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:05:21,065 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-04678
2025-08-06 19:05:21,065 - src.utils.helpers - INFO - generate_letter executed in 3.514s
2025-08-06 19:05:21,066 - src.services.chat_service - INFO - Processed edit request for session b803cb38-94b2-4956-986c-7fcaef992508 in 0.00s
2025-08-06 19:05:21,066 - src.api.chat_routes - INFO - Processed chat edit for session b803cb38-94b2-4956-986c-7fcaef992508
2025-08-06 19:05:21,067 - src.utils.helpers - INFO - edit_letter_chat executed in 3.516s
2025-08-06 19:05:21,067 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 19:05:21,067 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:05:21] "POST /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/edit HTTP/1.1" 200 -
2025-08-06 19:06:13,907 - __main__ - INFO - POST http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/edit - 127.0.0.1
2025-08-06 19:06:13,908 - src.services.letter_generator - INFO - Generating letter with ID: LET-20250806-46544
2025-08-06 19:06:17,383 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:06:17,386 - src.services.letter_generator - INFO - Letter generated successfully: LET-20250806-46544
2025-08-06 19:06:17,387 - src.utils.helpers - INFO - generate_letter executed in 3.479s
2025-08-06 19:06:17,387 - src.services.chat_service - INFO - Processed edit request for session b803cb38-94b2-4956-986c-7fcaef992508 in 0.00s
2025-08-06 19:06:17,388 - src.api.chat_routes - INFO - Processed chat edit for session b803cb38-94b2-4956-986c-7fcaef992508
2025-08-06 19:06:17,388 - src.utils.helpers - INFO - edit_letter_chat executed in 3.481s
2025-08-06 19:06:17,389 - __main__ - INFO - Response: 200 - chat.edit_letter_chat
2025-08-06 19:06:17,390 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:06:17] "POST /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/edit HTTP/1.1" 200 -
2025-08-06 19:07:02,217 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/status - 127.0.0.1
2025-08-06 19:07:02,219 - __main__ - INFO - Response: 200 - chat.get_session_status
2025-08-06 19:07:02,219 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:07:02] "GET /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/status HTTP/1.1" 200 -
2025-08-06 19:08:41,283 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 19:08:41,285 - src.api.archive_routes - INFO - Starting background archiving for letter ID: UNIQUE-ID
2025-08-06 19:08:41,285 - src.api.archive_routes - INFO - Letter archiving initiated for ID: UNIQUE-ID
2025-08-06 19:08:41,285 - src.utils.helpers - INFO - archive_letter executed in 0.001s
2025-08-06 19:08:41,285 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 19:08:41,286 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:08:41] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 19:08:41,720 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 19:08:41,720 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 19:08:41,721 - src.api.archive_routes - INFO - Generating PDF for letter ID: UNIQUE-ID
2025-08-06 19:08:45,650 - src.services.chat_service - INFO - Cleaned up 0 expired sessions
2025-08-06 19:08:57,388 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:08:58,773 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\_impl\\_browser_type.py', reloading
2025-08-06 19:08:58,785 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\async_api\\_generated.py', reloading
2025-08-06 19:08:59,421 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\_impl\\_browser.py', reloading
2025-08-06 19:08:59,435 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\_impl\\_browser_context.py', reloading
2025-08-06 19:09:00,759 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 19:09:06,201 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:09:06,239 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 19:09:06,246 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 19:09:19,648 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 19:09:19,648 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 19:09:19,649 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 19:09:19,649 - __main__ - INFO - Response: 200 - chat.list_active_sessions
2025-08-06 19:09:19,650 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:09:19] "GET /api/v1/chat/sessions HTTP/1.1" 200 -
2025-08-06 19:09:24,343 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions - 127.0.0.1
2025-08-06 19:09:24,344 - __main__ - INFO - Response: 200 - chat.list_active_sessions
2025-08-06 19:09:24,344 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:09:24] "GET /api/v1/chat/sessions HTTP/1.1" 200 -
2025-08-06 19:09:29,831 - __main__ - INFO - GET http://localhost:5000/api/v1/letter/health - 127.0.0.1
2025-08-06 19:09:29,831 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 19:09:31,486 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 19:09:31,487 - __main__ - INFO - Response: 200 - letter.health_check
2025-08-06 19:09:31,487 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:09:31] "GET /api/v1/letter/health HTTP/1.1" 200 -
2025-08-06 19:09:34,420 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/health - 127.0.0.1
2025-08-06 19:09:34,421 - __main__ - INFO - Response: 200 - chat.health_check
2025-08-06 19:09:34,421 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:09:34] "GET /api/v1/chat/health HTTP/1.1" 200 -
2025-08-06 19:09:38,022 - __main__ - INFO - GET http://localhost:5000/api/v1/archive/health - 127.0.0.1
2025-08-06 19:09:38,319 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 19:09:38,320 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 19:09:38,322 - __main__ - INFO - Response: 200 - archive.health_check
2025-08-06 19:09:38,323 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:09:38] "GET /api/v1/archive/health HTTP/1.1" 200 -
2025-08-06 19:10:09,201 - __main__ - INFO - DELETE http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508 - 127.0.0.1
2025-08-06 19:10:09,202 - src.utils.helpers - INFO - delete_chat_session executed in 0.000s
2025-08-06 19:10:09,202 - __main__ - INFO - Response: 404 - chat.delete_chat_session
2025-08-06 19:10:09,203 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:10:09] "[33mDELETE /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508 HTTP/1.1[0m" 404 -
2025-08-06 19:10:15,424 - __main__ - INFO - DELETE http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508 - 127.0.0.1
2025-08-06 19:10:15,424 - src.utils.helpers - INFO - delete_chat_session executed in 0.000s
2025-08-06 19:10:15,425 - __main__ - INFO - Response: 404 - chat.delete_chat_session
2025-08-06 19:10:15,425 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:10:15] "[33mDELETE /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508 HTTP/1.1[0m" 404 -
2025-08-06 19:10:22,397 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/status - 127.0.0.1
2025-08-06 19:10:22,398 - __main__ - INFO - Response: 404 - chat.get_session_status
2025-08-06 19:10:22,399 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:10:22] "[33mGET /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/status HTTP/1.1[0m" 404 -
2025-08-06 19:10:25,429 - __main__ - INFO - GET http://localhost:5000/api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/status - 127.0.0.1
2025-08-06 19:10:25,429 - __main__ - INFO - Response: 404 - chat.get_session_status
2025-08-06 19:10:25,429 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:10:25] "[33mGET /api/v1/chat/sessions/b803cb38-94b2-4956-986c-7fcaef992508/status HTTP/1.1[0m" 404 -
2025-08-06 19:10:55,432 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 19:10:55,434 - src.api.archive_routes - INFO - Starting background archiving for letter ID: UNIQUE-ID
2025-08-06 19:10:55,434 - src.api.archive_routes - INFO - Letter archiving initiated for ID: UNIQUE-ID
2025-08-06 19:10:55,434 - src.api.archive_routes - INFO - Generating PDF for letter ID: UNIQUE-ID
2025-08-06 19:10:55,436 - src.utils.helpers - INFO - archive_letter executed in 0.003s
2025-08-06 19:10:55,437 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 19:10:55,438 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:10:55] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 19:11:14,515 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:11:16,495 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\_impl\\_frame.py', reloading
2025-08-06 19:11:16,504 - werkzeug - INFO -  * Detected change in 'C:\\Users\\ziad.abdlhamed\\AppData\\Roaming\\Python\\Python313\\site-packages\\playwright\\_impl\\_page.py', reloading
2025-08-06 19:11:17,673 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 19:11:21,881 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:11:21,915 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 19:11:21,924 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 19:11:30,466 - __main__ - INFO - POST http://localhost:5000/api/v1/archive/letter - 127.0.0.1
2025-08-06 19:11:30,468 - src.api.archive_routes - INFO - Starting background archiving for letter ID: UNIQUE-ID
2025-08-06 19:11:30,468 - src.api.archive_routes - INFO - Letter archiving initiated for ID: UNIQUE-ID
2025-08-06 19:11:30,469 - src.utils.helpers - INFO - archive_letter executed in 0.002s
2025-08-06 19:11:30,470 - __main__ - INFO - Response: 200 - archive.archive_letter
2025-08-06 19:11:30,471 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:11:30] "POST /api/v1/archive/letter HTTP/1.1" 200 -
2025-08-06 19:11:30,910 - src.services.enhanced_pdf_service - INFO - Enhanced PDF service initialized
2025-08-06 19:11:30,911 - src.services.drive_logger - INFO - Drive Logger service initialized
2025-08-06 19:11:30,911 - src.api.archive_routes - INFO - Generating PDF for letter ID: UNIQUE-ID
2025-08-06 19:11:49,605 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-06 19:11:52,213 - src.services.enhanced_pdf_service - INFO - PDF generated successfully: Invitation_Letter_LET-20250806-91479.pdf (261003 bytes) in 0.00s
2025-08-06 19:11:52,213 - src.api.archive_routes - INFO - PDF generated successfully: Invitation_Letter_LET-20250806-91479.pdf
2025-08-06 19:11:52,214 - src.api.archive_routes - INFO - Uploading to Drive and logging for letter ID: UNIQUE-ID
2025-08-06 19:11:52,836 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-08-06 19:11:57,491 - src.services.drive_logger - INFO - File uploaded to Drive: Invitation Letter_UNIQUE-ID.pdf (ID: 1-MjegnhmgTc9qQDzgT-MJM-6Sbm-0Hcp)
2025-08-06 19:12:02,485 - src.services.google_services - INFO - Successfully logged 1 entries to AI Letter Generating/Submissions
2025-08-06 19:12:02,486 - src.utils.helpers - INFO - log_to_sheet executed in 4.994s
2025-08-06 19:12:02,487 - src.services.drive_logger - INFO - Successfully archived letter UNIQUE-ID to Drive and logged to sheets
2025-08-06 19:12:02,490 - src.api.archive_routes - INFO - Background archiving completed successfully for letter ID: UNIQUE-ID
2025-08-06 19:12:02,490 - src.api.archive_routes - INFO - Drive URL: https://drive.google.com/file/d/1-MjegnhmgTc9qQDzgT-MJM-6Sbm-0Hcp/view?usp=drivesdk
2025-08-06 19:13:20,178 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\demo_refactored_backend.py', reloading
2025-08-06 19:13:20,189 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\LetterToPdf\\letterToPdf.py', reloading
2025-08-06 19:13:20,241 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\ai_generator.py', reloading
2025-08-06 19:13:20,244 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\drive_logger.py', reloading
2025-08-06 19:13:20,245 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\example_client.py', reloading
2025-08-06 19:13:20,247 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\google_services.py', reloading
2025-08-06 19:13:20,249 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\n8n\\app.py', reloading
2025-08-06 19:13:20,275 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\api\\letter_routes.py', reloading
2025-08-06 19:13:20,317 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\services\\letter_generator.py', reloading
2025-08-06 19:13:20,327 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\src\\utils\\exceptions.py', reloading
2025-08-06 19:13:20,347 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_refactored_backend.py', reloading
2025-08-06 19:13:21,627 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 19:13:25,680 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:13:25,712 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 19:13:25,719 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 19:16:34,584 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\legacy_backup\\test.py', reloading
2025-08-06 19:16:34,597 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\LetterToPdf\\letterToPdf.py', reloading
2025-08-06 19:16:34,656 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\demo_refactored_backend.py', reloading
2025-08-06 19:16:34,657 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test\\demo_refactored_backend.py', reloading
2025-08-06 19:16:35,264 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_openai\\__init__.py', reloading
2025-08-06 19:16:35,268 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\dotenv\\__init__.py', reloading
2025-08-06 19:16:35,291 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\__init__.py', reloading
2025-08-06 19:16:35,304 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_openai\\chat_models\\__init__.py', reloading
2025-08-06 19:16:35,306 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py', reloading
2025-08-06 19:16:35,323 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\certifi\\__init__.py', reloading
2025-08-06 19:16:35,327 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\openai\\__init__.py', reloading
2025-08-06 19:16:35,330 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\_api\\deprecation.py', reloading
2025-08-06 19:16:35,334 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\callbacks\\__init__.py', reloading
2025-08-06 19:16:35,338 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py', reloading
2025-08-06 19:16:35,342 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\messages\\__init__.py', reloading
2025-08-06 19:16:35,345 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\__init__.py', reloading
2025-08-06 19:16:35,349 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\utils\\utils.py', reloading
2025-08-06 19:16:35,353 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\__init__.py', reloading
2025-08-06 19:16:35,356 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\httpx\\__init__.py', reloading
2025-08-06 19:16:35,367 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\_api\\__init__.py', reloading
2025-08-06 19:16:35,370 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\caches.py', reloading
2025-08-06 19:16:35,371 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\language_models\\base.py', reloading
2025-08-06 19:16:35,375 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompt_values.py', reloading
2025-08-06 19:16:35,378 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\rate_limiters.py', reloading
2025-08-06 19:16:35,382 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\base.py', reloading
2025-08-06 19:16:35,384 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\utils.py', reloading
2025-08-06 19:16:35,392 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\_api\\beta_decorator.py', reloading
2025-08-06 19:16:35,395 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\load\\serializable.py', reloading
2025-08-06 19:16:35,399 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\fields.py', reloading
2025-08-06 19:16:35,400 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_migration.py', reloading
2025-08-06 19:16:35,404 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic_core\\__init__.py', reloading
2025-08-06 19:16:35,408 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic_core\\core_schema.py', reloading
2025-08-06 19:16:35,410 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\aliases.py', reloading
2025-08-06 19:16:35,412 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\config.py', reloading
2025-08-06 19:16:35,413 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\errors.py', reloading
2025-08-06 19:16:35,415 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\functional_validators.py', reloading
2025-08-06 19:16:35,418 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\main.py', reloading
2025-08-06 19:16:35,421 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\networks.py', reloading
2025-08-06 19:16:35,433 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\types.py', reloading
2025-08-06 19:16:35,436 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\deprecated\\class_validators.py', reloading
2025-08-06 19:16:35,439 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\deprecated\\tools.py', reloading
2025-08-06 19:16:35,443 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_repr.py', reloading
2025-08-06 19:16:35,446 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_decorators.py', reloading
2025-08-06 19:16:35,448 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_model_construction.py', reloading
2025-08-06 19:16:35,453 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_utils.py', reloading
2025-08-06 19:16:35,461 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain\\prompts\\__init__.py', reloading
2025-08-06 19:16:35,462 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\annotated_types\\__init__.py', reloading
2025-08-06 19:16:35,463 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\output_parsers\\__init__.py', reloading
2025-08-06 19:16:35,464 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_internal_dataclass.py', reloading
2025-08-06 19:16:35,467 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_generate_schema.py', reloading
2025-08-06 19:16:35,474 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\messages\\base.py', reloading
2025-08-06 19:16:35,476 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\messages\\utils.py', reloading
2025-08-06 19:16:35,484 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\json\\__init__.py', reloading
2025-08-06 19:16:35,486 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\app.py', reloading
2025-08-06 19:16:35,488 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\blueprints.py', reloading
2025-08-06 19:16:35,491 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\globals.py', reloading
2025-08-06 19:16:35,492 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\wrappers.py', reloading
2025-08-06 19:16:35,498 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\wrappers\\__init__.py', reloading
2025-08-06 19:16:35,501 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\wrappers\\request.py', reloading
2025-08-06 19:16:35,502 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\wrappers\\response.py', reloading
2025-08-06 19:16:35,504 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\datastructures\\__init__.py', reloading
2025-08-06 19:16:35,508 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\language_models\\__init__.py', reloading
2025-08-06 19:16:35,509 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\sansio\\response.py', reloading
2025-08-06 19:16:35,512 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\typing.py', reloading
2025-08-06 19:16:35,513 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\messages\\ai.py', reloading
2025-08-06 19:16:35,515 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\runnables\\config.py', reloading
2025-08-06 19:16:35,516 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\sansio\\app.py', reloading
2025-08-06 19:16:35,519 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\sansio\\scaffold.py', reloading
2025-08-06 19:16:35,520 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\v1\\__init__.py', reloading
2025-08-06 19:16:35,521 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\flask\\sansio\\blueprints.py', reloading
2025-08-06 19:16:35,524 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\dotenv\\main.py', reloading
2025-08-06 19:16:35,526 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\datastructures\\headers.py', reloading
2025-08-06 19:16:35,531 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\werkzeug\\sansio\\request.py', reloading
2025-08-06 19:16:35,533 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\output_parsers\\base.py', reloading
2025-08-06 19:16:35,541 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\certifi\\core.py', reloading
2025-08-06 19:16:35,543 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\callbacks\\base.py', reloading
2025-08-06 19:16:35,544 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\base.py', reloading
2025-08-06 19:16:35,565 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\pydantic\\_internal\\_generics.py', reloading
2025-08-06 19:16:35,580 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\hijri_converter\\__init__.py', reloading
2025-08-06 19:16:35,584 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\playwright\\async_api\\__init__.py', reloading
2025-08-06 19:16:35,588 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\messages\\human.py', reloading
2025-08-06 19:16:35,596 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\__init__.py', reloading
2025-08-06 19:16:35,598 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\prompt.py', reloading
2025-08-06 19:16:35,600 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\.venv\\Lib\\site-packages\\langchain_core\\prompts\\string.py', reloading
2025-08-06 19:16:35,896 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 19:16:40,437 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:16:40,474 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 19:16:40,483 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 19:16:43,486 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test_chat.py', reloading
2025-08-06 19:16:43,487 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test\\test_chat.py', reloading
2025-08-06 19:16:43,489 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\test\\test_chat.py', reloading
2025-08-06 19:16:44,197 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 19:16:51,613 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:16:51,651 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 19:16:51,658 - werkzeug - INFO -  * Debugger PIN: 862-217-201
2025-08-06 19:16:57,090 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\new_app.py', reloading
2025-08-06 19:16:57,093 - werkzeug - INFO -  * Detected change in 'D:\\shobbak\\AutomatingLetter\\app.py', reloading
2025-08-06 19:16:57,612 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-08-06 19:17:57,389 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:17:57,447 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://localhost:5000
2025-08-06 19:17:57,447 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 19:17:57,456 - werkzeug - INFO -  * Restarting with stat
2025-08-06 19:18:00,949 - __main__ - INFO - Starting development server on localhost:5000
2025-08-06 19:18:00,967 - werkzeug - WARNING -  * Debugger is active!
2025-08-06 19:18:00,978 - werkzeug - INFO -  * Debugger PIN: 129-536-069
2025-08-06 19:18:24,158 - __main__ - INFO - GET http://localhost:5000/health - 127.0.0.1
2025-08-06 19:18:24,158 - src.services.letter_generator - INFO - Using AI model: gpt-4.1
2025-08-06 19:18:25,018 - src.services.letter_generator - INFO - Arabic Letter Generation Service initialized
2025-08-06 19:18:25,018 - src.services.chat_service - INFO - Started background cleanup thread
2025-08-06 19:18:25,018 - src.services.chat_service - INFO - Chat service initialized
2025-08-06 19:18:25,025 - src.services.pdf_service - INFO - PDF service initialized
2025-08-06 19:18:25,028 - __main__ - INFO - Response: 200 - health_check
2025-08-06 19:18:25,028 - werkzeug - INFO - 127.0.0.1 - - [06/Aug/2025 19:18:25] "GET /health HTTP/1.1" 200 -
